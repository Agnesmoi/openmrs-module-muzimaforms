<div ng-controller="FormCtrl" ng-init="init()">
    <div class="header_background border">
        <span><input class="padded-content" type="search" ng-model="searchQuery" style="width: 200px;height: 15px"
                     placeholder="Search..."></span>
        <span class="pull-right padded-content" ng-switch on="importMode">
            <div ng-switch-when="false" ng-include="'import'"></div>
            <div ng-switch-when="true" ng-include="'done'"></div>
        </span>

        <script type="text/ng-template" id="import">
            <a class="btn btn-info" ng-click="import()" style="color: #ffffff"><i class="icon-plus"> Import</i></a>
        </script>

        <script type="text/ng-template" id="done">
            <a class="btn btn-danger" ng-click="cancelImport()" style="color: #ffffff"><i class="icon-remove">
                Cancel</i></a>
            <a class="btn btn-success" ng-click="done()" style="color: #ffffff"><i class="icon-ok"> Done</i></a>
        </script>
    </div>

    <div collapse="importMode" ng-show="tagFilterActive()" class="tag-filter-box">
        <div class="padded-content">
            <span> Filter: </span>
            <span ng-repeat="tag in activeTagFilters">
                  <span class="label form-tag" ng-style="tagStyle(tag.id)">
                       <span>{{tag.name}} </span><span ng-click="removeTagFilter(tag)"><i
                          class="icon-remove"></i></span>
                  </span>
            </span>
        </div>
    </div>

    <div collapse="importMode" class="row-fluid open-box" ng-show="hasForms()"
         ng-repeat="html5form in html5forms | filter:searchQuery | tagFilter:activeTagFilters" ng-click="selectForm(html5form.form.id)"
         ng-class="activeForm(html5form.form.id)">
        <div class="span10 padded-table-content">
            <div class="padded-table-content">
                <strong>{{html5form.form.name}}</strong>
            </div>
            <div class="padded-table-content">
                <small>{{html5form.form.description}}</small>
            </div>
            <div class="padded-table-content">
                    <span ng-repeat="tag in html5form.form.tags">
                        <span class="label form-tag" ng-style="tagStyle(tag.id)">
                            <span ng-click="addTagFilter(tag)">{{tag.name}} </span><span ng-click="removeTag(html5form.form, tag)"><i
                                class="icon-remove"></i></span>
                        </span>
                    </span>
            </div>
        </div>
        <div class="span1 padded-table-content">
            <a class="btn btn-inverse" ng-click="editMode = !editMode" style="color: #ffffff"><i
                    class="icon-tags"></i></a>
        </div>
        <div collapse="editMode" class="row-fluid padded-table-content">
            <form class="span10" ng-submit="saveTag(html5form)"><input name="newTag" ng-model="html5form.newTag"
                                                                       type="text"
                                                                       ng-trim="true"
                                                                       placeholder="Enter a tag...">
            </form>
        </div>
    </div>

    <div collapse="!importMode" class="open-box" ng-repeat="form in xForms | filter:searchQuery"
         ng-click="selectXForm(form.id)" ng-class="activeXForm(form.id)">
        <div class="padded-table-content">
            <strong>{{form.name}}</strong>
        </div>
        <div class="padded-table-content">
            <small>{{form.description}}</small>
        </div>
    </div>

    <div ng-show="!hasForms() && !importMode" class="open-box">
        <div>Please import forms</div>
    </div>
    <div ng-show="!hasXForms() && importMode" class="open-box">
        <div>No Xforms to import</div>
    </div>
</div>